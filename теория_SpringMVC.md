## SpringMVC
SpringMVC - это один из компонентов Spring Framework (**паттерн проектирования приложений**),который позволяет разрабатывать web-приложения на Java\
SpringMVC предполгагает разработку web-приложений с использованием архитектуры **Model-View-Controller**
Разрабатывая web-приложения с помощью SpringMVC,мы можем использовать все, что дает нам SpringCore -\
бины,DI, и так далее

**Model** - логика работы с данными\
**View** - логика представления, интерфейс\
**Controller** - логика навигации,обраотка запросов 

### Из чего состоит SpringMVC приложение?
- Из обычных Java классов (контроллеры, модели  и прочее).Очень активно используются аннотации,которые применяются к классам и дают им дополнительные возможности(например, аннотация @Controller)
- Набор HTML страниц (**представления**). К ним часто добавляется JavaScript код, который "оживляет" HTML представления  и CSS, который стилизует HTML.
-Spring конфигурация (XML,Аннотации,Java).

Также в SpringMVC есть компонент **DispatcherServlet**\
**DispatcherServlet** является входной точкой SpringMVC приложния. Он уже реализовани командой Spring, нам его реализовывать не надо.
 
 ### Алгоритм работы SpringMVC приложения
 HTTP запрос от пользователя:

 1) Приходит на сервер.Сервер обрабатывает запрос и передает его на Spring приложение. 
 2) Запрос попадает на DispatcherServlet.
 3) DispatcherServlet отправляет запрос на правильный контроллер.

### Контроллер 
- Обрабатывает запросы от пользователя 
- Обменивается даннными с моделью 
- Показывает пользователю правильное представление 
- Переадресовывает пользователя на другие страницы

### Модель 
- Хранит в себе данные 
- Взаимодействует с БД для получения данных 
- Отдает данные контроллеру

Для настройки проекта:
- сначала настраиваем сервер Tomcat: выбираем конфигурацию Tomcat->local->fix(выбираем артефакт, например, test:war exploded)->ok
- После настройки сервера рекомендуется перезапустить IntelligyIDEA из за возникающих непонятных  багов.\
Поле **application context** сделать пустым.\
- Добавим необходимые зависимости в pom.xml
- Реализуем **web.xml**,если конфигурируем с ним (web.xml считывается сервером Apache Tomcat,конфигурирует DispatcherServlet)\
  // современнве приложения обычно не используют web.xml и applicationContext.xml, в основном используется аннотация **@Configuration**
- Реализуем **applicationContext.xml**
- Реализуем контроллер и представление (пока без модели) Необходимо поиетить аннотацией **@Controller**

Для того чтобы конфигурировать веб-приложение без ".xml"файлов, в проекте необходимо создать Java класс, который реализует интерфейс **org.springframework.web.WebApplicationInitializer**\
Такой класс считывается автоматически и работает как web.xml\
Можно использовать для конфигурации абстрактный класс **AbstractAnnotationConfigDispatcherServletInitializer**, он реализует интерфейс **org.springframework.web.WebApplicationInitializer** за нас


### Методы контроллеров
- Методов в контроллере может быть несколько 
- Обычно (но не всегда), каждый метод соответствует одному URL'у
- Обычно(но не всегда ), методы возвращают строку (String) - название представления, которое надо показать пользователю (могут вернуть, например json)
- У метода может быть любое название
### Маппинги
Всего 5 видов маппингов 
1) @GetMapping
2) @PostMapping
3) @PutMapping
4) @DeleteMapping
5) @PatchMapping

Иногда пишут устаревший вариант аннотации на методе  **@RequestMapping**(method=RequestMethod.GET)\
Но аннотация **@RequestMapping** на классе не является устаревшей и вполне используется для уточнения указания пути на контроллер

```
@Controller
@RequestMapping("/first")
public class FirstController {

    @GetMapping("/hello")
    public String helloPage() {
        return "first/hello";
    }

    @GetMapping("/goodbye")
    public String goodbyePage() {
        return "first/goodbye";
    }
    //hellopage будет по адресу http://localhost:8080/first/hello
```

Маппинги связывают метод контроллера с адресом, по которому можно к этому методу обратиться (из браузера,например)\
Всего 5 видов маппинга - в зависимости от того, какой HTTP звпрос (с каким НТТР методом) должен прийти в этот метод контроллера 
чтобы ходить по разным страницам нашего приложения, можно использовать тег **<a></a>**\
```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Goodbye</title>
</head>
<body>
Goodbye!

//на странице http://localhost:8080/goodbye появится ссылка "SayHello" на страницу http://localhost:8080/hello
<a href="/hello">SayHello</a>

</body>
</html>
```

### Пврвметры GET запроса в Spring Framework
Параметры GET запроса  можно получить двумя способами:

1) С помощью объекта **HTTPServletRequest**
```
 @GetMapping("/hello")
 public String helloPage(HTTPServletRequest request){
    String name = request.getParameter("name");
    // работаем с пришедшим от пользователя параметром

    return first/hello;
 }
```

2) С помощью аннотации **@RequestParam**
```
@GetMapping("/hello")
public String helloPage(@RequestParam("name") String name){
    // работаем с пришедшим от пользователя параметром
    return first/hello;
}

```
Если от GET запроса нам нужны только параметры, то второй способ получения параметров предпочтительнее, так как в первом методе мы полц-учаем большой объект запроса,в котором нам нужен только параметр.\
Первый способо нужен,если нам необходимо поработать полностью с запросом (например, нужны **header'ы**).
```
http://localhost:8080/hello?name=Milana&lastName=Milashkova // в параметры `name` и `lastName` контроллера придут 'Milana' и 'Milashkova'\
```
Еще одно различие : если параметры из метода Get передаются с помощью **HTTPServletRequest**, то при их отстутсвии в контроллер вернутся null.\
Если же параметры в контроллер передаются с помощью **@RequestParam**, то в случае их отстутствия в запросе Get вылетит ошибка.\
Для избежания ошибки можно прописать :
```

@GetMapping("/hello")
public String helloPage(@RequestParam(value="name", required =false) String name){
    // в случае, если параметр с ключом "name" не придет, в парметр метода 'helloPage()' положится null
    return first/hello;
}
```
в отображении hello.html,которое возвращает метод,также можно прописать параметры вместе с ссылкой **для передачи параметров при нажатии на ссылку**
```
<a href="/first/hello?name=Tanya&lastName=Tatianova">Tosya</a>
//в метод ,который маппится 
@RequestMapping("/first")
@GetMapping("/hello")
в качесв=тве параметров передадутся 'Tanya''Tatianova'
```
### Получение доступа к модели в контроллере
Для получения доступа к модели в контроллере в параметрах метода достаточно прописать параметр "Model model",Spring сам внедрит необходимый объект в метод контроллера, с помощью "model.getAttribute" можем положить пару "ключ-значение", модель будет отправлена на представление, где спомощью шаблонизатора (thymeLeaf) мы сможем получить значени по ключу.
```
@GetMapping
public String helloPage(Model model){
    model.getAttribute("key","some Value")
    return "first/hello";

}
```















